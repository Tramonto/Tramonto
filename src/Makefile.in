# 
# This file is converted from Makefile.in to Makefile
# by the configure script.  
#

# NOTE: We also need to include the .h file as a "source" file, because this
# list is also used to package the distribution.
COMMON_C_SOURCES= \
	${srcdir}/dft_input.c \
	${srcdir}/dft_main.c \
	${srcdir}/dft_mesh.c \
	${srcdir}/dft_mesh_surfaces.c \
	${srcdir}/dft_mesh_lib.c \
	${srcdir}/dft_newton.c \
	${srcdir}/dft_ldbal.c \
	${srcdir}/dft_fill_pde.c \
	${srcdir}/dft_stencil.c \
	${srcdir}/dft_thermo.c \
	${srcdir}/dft_out_main.c \
	${srcdir}/dft_out_ads.c \
	${srcdir}/dft_out_energy.c \
	${srcdir}/dft_out_force.c \
	${srcdir}/dft_out_flux.c \
	${srcdir}/dft_out_profiles.c \
	${srcdir}/dft_vext.c \
	${srcdir}/dft_guess.c \
	${srcdir}/dft_comm.c \
	${srcdir}/dft_continuation.c \
	${srcdir}/dft_fill_shared.c \
	${srcdir}/dft_fill_control.c \
	${srcdir}/dft_fill_main.c \
	${srcdir}/dft_fillp.c \
	${srcdir}/dft_fill_rosen_rb.c \
	${srcdir}/dft_fill_mf.c \
	${srcdir}/dft_vext_coul.c \
	${srcdir}/dft_uww.c \
	${srcdir}/dft_images.c \
	${srcdir}/dft_potentials.c \
	${srcdir}/rf_allo.c \
	${srcdir}/loca_lib.c \
	${srcdir}/loca_bord.c \
	${srcdir}/loca_util.c 

COMMON_CXX_SOURCES = \
	${srcdir}/dft_BasicLinProbMgr.cpp \
	${srcdir}/dft_PolyLinProbMgr.cpp \
	${srcdir}/dft_PolyA11_Epetra_Operator.cpp \
	${srcdir}/dft_PolyA22_Epetra_Operator.cpp \
	${srcdir}/dft_Schur_Epetra_Operator.cpp \
	${srcdir}/dft_c2cpp_wrappers.cpp 

COMMON_HEADERS = \
	${srcdir}/dft_globals.h \
	${srcdir}/dft_globals_const.h \
	${srcdir}/dft_ldbal.h \
	${srcdir}/rf_allo.h \
	${srcdir}/loca_const.h \
	${srcdir}/loca_util_const.h \
	${srcdir}/az_aztec.h \
	${srcdir}/az_aztec_defs.h \
	${srcdir}/dft_BasicLinProbMgr.hpp \
	${srcdir}/dft_PolyLinProbMgr.hpp \
	${srcdir}/dft_PolyA11_Epetra_Operator.hpp \
	${srcdir}/dft_PolyA22_Epetra_Operator.hpp \
	${srcdir}/dft_Schur_Epetra_Operator.hpp \
	${srcdir}/dft_c2cpp_wrappers.h  

libdft_a_SOURCES=${COMMON_C_SOURCES} ${COMMON_CXX_SOURCES}
dft_SOURCES= dft_maindriver.c ${COMMON_C_SOURCES} ${COMMON_CXX_SOURCES}

dft_OBJECTS=dft_maindriver.o ${COMMON_C_SOURCES:.c=.o} ${COMMON_CXX_SOURCES:.cpp=.o}
libdft_a_OBJECTS=${COMMON_C_SOURCES:.c=.o} ${COMMON_CXX_SOURCES:.cpp=.o}

#
# let the configure script figure out these parameters
#
@SET_MAKE@
srcdir = @srcdir@
VPATH = @srcdir@

CC = @CC@
CXX = @CXX@
CFLAGS = @CFLAGS@ -I. -I./include/ 
CXXFLAGS = @CXXFLAGS@ -DHAVE_CONFIG_H -I. -I./include/ 
LDFLAGS = @LDFLAGS@ @LIBS@ @FLIBS@ 
RANLIB = @RANLIB@

# Targets
dft@EXEEXT@ : ${dft_OBJECTS}
	${CXX} ${CFLAGS} -o dft ${dft_OBJECTS} ${LDFLAGS} 

libdft.a: ${libdft_a_OBJECTS}
	ar cru libdft.a ${libdft_a_OBJECTS}
	${RANLIB} libdft.a

# This file gets special treatment on pc-linux platforms
# on all other platforms it's compiled like any other 
# c file
.c.o :
	${CC} ${CFLAGS} -c -o $@ $<

.cpp.o :
	${CXX} ${CXXFLAGS} -c -o $@ $<


clean:
	-(rm *.o)
	-rm Makefile
